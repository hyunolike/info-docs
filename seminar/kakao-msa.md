## 카카오 이모지 서버 `MSA`
> [참고 자료](https://tech.kakao.com/2021/09/14/msa/)

### 1. 현장조사
> 현장의 실태 조사해서 설계의 자료로 하는 것
- ![image](https://user-images.githubusercontent.com/61215550/177711972-0f745119-0797-4034-82d3-43fb48870272.png)
- 이모지 서비스 크게 4가지 
  - 이모티콘 서비스
  - 이모티콘 스튜디오 서비스
  - 각 서비스들 운영하는 Admin 서비스
- 대규모 서비스들 모놀리스 형태로 운영 ㅠ,ㅠ


|주요 이슈|이슈 리스트|
|-----------|------------|
|운영 이슈|- `webistrano` `ansible` 배포의 어려움<br>- 코드의 버전 관리 복잡도(하나의 서버에 여러 기능 존재)<br>하나의 서비스가 하나의 저장소를 사용하는 형태|
|기술 이슈|- 서비스 너무 거대 >> 설계 변경의 어려움<br>- 과거 기술 종속 >> 앞으로 나아가지 못함|


### 2. 설계
> 목적에 따라 실제적인 계획을 세워 / 도면 따위로 명시하는 일
- MSA의 특징
  - 서비스 간에 네트워크를 넘나드는 통신 가능
  - 도메인 중심 설계
  - 서비스별 최적화된 기술을 독립적으로 사용 가능
  - 서비스 크기 작아지고, 독자적 개발 가능, 독립 배포 가능, 배포 자동화
- MSA 기대 사항 (아래 표 참고)

|주요 이슈|기대 사항|
|----------|---------------------------|
|운영 측면|- 배포 단위 작아짐<BR>- 배포 영향 범위 줄어듬<BR>- 배포 버전 관리 독립적<BR>- Branch 엉키는 일 줄어듬<br>- ✔트래픽 분산 가능해져 서비스 별로 효율적인 리소스 운영을 기대|
|기술 측면|- 서비스 작아져 역할 명확/디버깅 포인트를 고립 시킴<BR>- 설계변경에 대한 부담 낮아짐<BR>- 각 서비스별로 기술 선택의 의존성이 낮아져서 각 서비스에 맞는 최적 기술을 선택 가능|
  
#### 2.1 `MSA`
- SOA 하위 호환 느낌으로 서비스 구조가 서버 안에서 더 바깥으로 나누어졌을 뿐! 이미 있었던 개념에서 벗어나지 않음
- ✔ 클라우드 보편화로 MSA 핫해짐!
  - MSA를 통해 생겨나는 많은 서비스의 배포 때문에 걱정되는 부분들은 클라우드의 편리한 인스턴스 할당 관리 통해 해결 가능
  - 자유로운 인스턴스 할당의 폐해로 나타나는 >> 리소스의 낭비 >> MSA 통해 서비스별 리소스 할당이 가능한 장점으로 보완
#### 2.2 `MSA` 도입으로 생겨날 예상 문제
|주요 이슈|예상 문제|
|----------|-----------------------|
|기술 측면|- 함수 호출 >> `Network I/O` 호출로 변경(서비스간 동기화 어려워짐)<br>- DB 분리 시에 Join 어려워짐|
|운영 측면|- 관리해야 할 서비스 많아짐|
  
...
