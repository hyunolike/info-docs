## Prometheus
> [참고자료](https://velog.io/@zihs0822/series/Prometheus%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90-%EA%B5%AC%EC%84%B1)
- `metric`: 대시보드의 특정 수치들을 그래프로 보여주는 일종의 시각화? 데이터?

### 1. 모니터링 시스템 개념
#### 1.1 Push / Pull
- Push: 데이터 가진 곳에서 >> 필요한 곳으로 보냄 `Nagios` `Zabbix`
- Pull: 데이터 필요한 곳에서 >> 가진 곳으로 데이터 긁어감 `Prometheus` `Datadog` `collectd`


|Pull|Push|
|----|----|
|중앙집중형(데이터 수집 항목, 수집할 서버 모두 관리)|분산형(에이전트가 보내주는 데이터를 긁어감)|
|수집대상 유연성 측면에서 유리|수집 대상 Auto-scaling 등 가변적일 때 유리|
|HA 측면에서 유리|보안 측면에서 유리|

### 2. Prometheus 기능
#### 2.1 Metric 수집
- `Pulling` 방식 >> 수집 데이터에 따라 여러 __Exporter__ 서드파티앱 존재
  - 중앙 서버 >> 수집 대상 서버에서 데이터 긁어가는 방식
  - 중앙 서버에서 수집할 서버들의 목록 관리 >> Service Discovery
- Service Discovery
- Exporter
  - 모니터링 에이전트 >> 타겟 시스템에서 메트릭 읽어, 프로메테우스가 풀링할 수 있게 해줌
- Retrieval

#### 2.2 저장
- 로컬 디스크에 저장 >> 스케일링 불가능 >> 단순히 디스크 늘리는 방식

#### 2.3 서빙
- 저장된 메트릭 >> `PromQL` 쿼리 이용 >> 조회

### 3. 단점 ㅠ,ㅠ
- 싱글 호스트 구조의 문제
- 수집된 데이터 >> 근사치
  - 풀링하는 순간의 스냅샷
  - 풀링 수행하지 않는 시점의 이슈 >> 해당 상황 못잡아냄 ㅠ,ㅠ

### 4. 프로메테우스 선택 이유
- 라이센스에서의 자유로움
- 수집 대상의 유연성
- 커뮤니티의 규모
